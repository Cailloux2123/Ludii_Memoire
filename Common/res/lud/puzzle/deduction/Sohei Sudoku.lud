(game "Sohei Sudoku" 
    (players 1) 
    (equipment { 
        (board 
                (hole
            		(merge {
                    	(square 9) 
                        (shift 6 6 (square 9))
                        (shift 12 0 (square 9))
                        (shift 6 -6 (square 9))
                    })
                    (poly { {39 69} {69 102} {102 214} {214 39}})
                )
            (values Cell (range 1 9))
        )
        //Sudoku 1
        // Rows
        (regions {0 1 2 3 4 5 7 9 11})
        (regions {14 15 16 17 18 19 20 21 22})
        (regions {24 25 26 27 28 29 30 31 32})
        (regions {34 35 36 37 38 39 40 41 42})
        (regions {44 45 46 47 48 49 50 51 52})
        (regions {53 54 55 56 57 58 59 60 61})
        (regions {62 63 64 65 66 67 68 69 70})
        (regions {72 73 74 75 76 77 78 79 80})
        (regions {82 83 84 85 86 87 88 89 90})
        
        // Column
        (regions {0 14 24 34 44 53 62 72 82})
        (regions {1 15 25 35 45 54 63 73 83})
        (regions {2 16 26 36 46 55 64 74 84})
        (regions {3 17 27 37 47 56 65 75 85})
        (regions {4 18 28 38 48 57 66 76 86})
        (regions {5 19 29 39 49 58 67 77 87})
        (regions {7 20 30 40 50 59 68 78 88})
        (regions {9 21 31 41 51 60 69 79 89})
        (regions {11 22 32 42 52 61 70 80 90})
        
        // Subgrid
        (regions {0 1 2 14 15 16 24 25 26})
        (regions {3 4 5 17 18 19 27 28 29})
        (regions {7 9 11 20 21 22 30 31 32})
        (regions {34 35 36 44 45 46 53 54 55})
        (regions {37 38 39 47 48 49 56 57 58})
        (regions {40 41 42 50 51 52 59 60 61})
        (regions {62 63 64 72 73 74 82 83 84})
        (regions {65 66 67 75 76 77 85 86 87})
        (regions {68 69 70 78 79 80 88 89 90})
        
        //Sudoku 2
        // Rows
        (regions {68 69 70 71 96 97 99 101 103})
        (regions {78 79 80 81 106 107 108 109 110})
        (regions {88 89 90 91 112 113 114 115 116})
        (regions {92 93 94 95 118 119 120 121 122})
        (regions {123 124 125 126 127 128 129 130 131})
        (regions {132 133 134 135 136 137 138 139 140})
        (regions {141 142 143 144 145 146 147 148 149})
        (regions {150 151 152 153 154 155 156 157 158})
        (regions {159 160 161 162 163 164 165 166 167})
        
        // Column
        (regions {68 78 88 92 123 132 141 150 159})
        (regions {69 79 89 93 124 133 142 151 160})
        (regions {70 80 90 94 125 134 143 152 161})
        (regions {71 81 91 95 126 135 144 153 162})
        (regions {96 106 112 118 127 136 145 154 163})
        (regions {97 107 113 119 128 137 146 155 164})
        (regions {99 108 114 120 129 138 147 156 165})
        (regions {101 109 115 121 130 139 148 157 166})
        (regions {103 110 116 122 131 140 149 158 167})
        
        // Subgrid
        (regions {68 69 70 78 79 80 88 89 90})
        (regions {71 96 97 81 91 106 107 112 113})
        (regions {99 101 103 108 109 110 114 115 116})
        (regions {92 93 94 123 124 125 132 133 134})
        (regions {95 118 119 126 127 128 135 136 137})
        (regions {120 121 122 129 130 131 138 139 140})
        (regions {141 142 143 150 151 152 159 160 161})
        (regions {144 145 146 153 154 155 162 163 164})
        (regions {147 148 149 156 157 158 165 166 167})
        
        //Sudoku 3
        // Rows
        (regions {240 241 242 243 244 245 246 247 248})
        (regions {249 250 251 252 253 254 255 256 257})
        (regions {258 259 260 261 262 263 264 265 266})
        (regions {267 268 269 270 271 272 273 274 275})
        (regions {276 277 278 279 280 281 282 283 284})
        (regions {6 8 10 12 285 171 168 172 174})
        (regions {7 9 11 13 286 170 169 173 175})
        (regions {20 21 22 23 287 183 182 184 185})
        (regions {30 31 32 33 288 193 192 194 195})
        
        // Column
        (regions {240 249 258 267 276 6 7 20 30})
        (regions {241 250 259 268 277 8 9 21 31})
        (regions {242 251 260 269 278 10 11 22 32})
        (regions {243 252 261 270 279 12 13 23 33})
        (regions {244 253 262 271 280 285 286 287 288})
        (regions {245 254 263 272 281 171 170 183 193})
        (regions {246 255 264 273 282 168 169 182 192})
        (regions {247 256 265 274 283 172 173 184 194})
        (regions {248 257 266 275 284 174 175 185 195})
        
        // Subgrid
        (regions {240 241 242 249 250 251 258 259 260})
        (regions {243 244 245 252 253 254 261 262 263})
        (regions {246 247 248 255 256 257 264 265 266})
        (regions {267 268 269 276 277 278 6 8 10})
        (regions {270 271 272 279 280 281 12 285 171})
        (regions {273 274 275 282 283 284 168 172 174})
        (regions {7 9 11 20 21 22 30 31 32})
        (regions {13 286 170 23 287 183 33 288 193})
        (regions {169 173 175 182 184 185 192 194 195})
        
        //Sudoku 4
        // Rows
        (regions {169 173 175 176 177 178 179 180 181})
        (regions {182 184 185 186 187 188 189 190 191})
        (regions {192 194 195 196 197 198 199 200 201})
        (regions {202 203 204 205 206 207 208 209 210})
        (regions {211 212 213 214 215 216 217 218 219})
        (regions {98 100 102 104 220 221 222 223 224})
        (regions {99 101 103 105 225 226 227 228 229})
        (regions {108 109 110 111 230 231 232 233 234})
        (regions {114 115 116 117 235 236 237 238 239})
        
        // Column
        (regions {169 182 192 202 211 98 99 108 114})
        (regions {173 184 194 203 212 100 101 109 115})
        (regions {175 185 195 204 213 102 103 110 116})
        (regions {176 186 196 205 214 104 105 111 117})
        (regions {177 187 197 206 215 220 225 230 235})
        (regions {178 188 198 207 216 221 226 231 236})
        (regions {179 189 199 208 217 222 227 232 237})
        (regions {180 190 200 209 218 223 228 233 238})
        (regions {181 191 201 210 219 224 229 234 239})
        
        // Subgrid
        (regions {169 173 175 182 184 185 192 194 195})
        (regions {176 177 178 186 187 188 196 197 198})
        (regions {179 180 181 189 190 191 199 200 201})
        (regions {202 203 204 211 212 213 98 100 102})
        (regions {205 206 207 214 215 216 104 220 221})
        (regions {208 209 210 217 218 219 222 223 224})
        (regions {99 101 103 108 109 110 114 115 116})
        (regions {105 225 226 111 230 231 117 235 236})
        (regions {227 228 229 232 233 234 237 238 239})
        
        
    }) 
    (rules
    	(start <Challenge>)
        (play (satisfy (all Different)))
        (end (if (is Solved) (result P1 Win)))
    )
)

//------------------------------------------------------------------------------

(option "Challenge" <Challenge> args:{ <start> }
{
(item "1" 
    <(set { 
    	{161 4} {162 9} {164 8} {165 7} {152 2} {153 6} {154 4} {155 1} {156 3} {144 7} {146 2} {135 1} {137 9}
    	{125 1} {126 4} {127 8} {128 3} {129 5} {94 7} {95 5} {119 6} {120 9} {90 6} {112 1} {114 2} {79 7} {81 2}
    	{107 4} {109 5} {62 4} {63 3} {66 1} {67 6} {68 2} {103 6} {105 5} {225 8} {228 9} {229 2} {53 6} {54 5} {55 3}
    	{56 8} {57 7} {58 1} {60 4} {45 1} {48 6} {50 7} {34 2} {35 7} {36 8} {37 5} {38 4} {39 9} {41 6} {100 7} {104 6}
    	{220 3} {221 9} {222 2} {223 1} {224 8} {213 2} {215 1} {218 5} {203 8} {205 2} {206 4} {207 5} {208 6}
    	{209 3} {210 7} {24 1} {25 8} {28 3} {29 2} {30 6} {195 8} {196 9} {197 7} {200 6} {201 3} {21 1} {23 2}
    	{183 6} {184 4} {11 4} {286 1} {169 3} {10 6} {12 4} {171 1} {168 5} {278 9} {279 8} {280 3} {281 2}
    	{282 4} {270 9} {272 5} {261 6} {263 4} {251 5} {252 3} {253 8} {254 9} {255 2} {242 2} {243 1} {245 7} {246 6}
    })>
    ""
) 
})

//------------------------------------------------------------------------------

(metadata 
    (info
        {
        (description "Sohei Sudoku is one of the sudoku variation with overlapping sudoku grids.")
        (rules "The puzzle consists of 4 grids, one for each cardinal points with a hole in the center.")
        (source "<a href=\"https://www.cross-plus-a.com/fr/sudoku.htm#SoheiSudoku\" target=\"_blank\" class=\"style1\" style=\"color: #0000EE\" />cross-plus-a.com</a>")
        (version "1.3.12")
        (classification "puzzle/deduction")
        (credit "Pierre Accou")
        }
    )
    (graphics {
        (show Line { 
            {0 193} {30 223} {60 249} {90 267} {174 183} {144 153} {277 268} {298 307}
            {0 90} {3 93} {268 174} {271 177} {180 274} {193 267} {190 264} {277 183} 
            } 
            (colour Black) scale:2
        )
        (region colour {43} (colour 255 255 255))
    })
)
