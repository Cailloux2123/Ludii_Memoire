(game "Flower Sudoku" 
    (players 1) 
    (equipment { 
        (board 
            (merge {
                (square 9) 
                (shift 3 0 (square 9))
                (shift 0 3 (square 9))
                (shift -3 0 (square 9))
                (shift 0 -3 (square 9))
            })
            (values Cell (range 1 9))
        )
     // Rows
        (regions {0 3 5 7 9 11 13 15 17})
        (regions {180 181 182 183 184 185 186 187 188})
        (regions {171 172 173 174 175 176 177 178 179})
        (regions {153 154 2 1 4 6 8 10 12})
        (regions {1 4 6 8 10 12 14 16 18})
        (regions {8 10 12 14 16 18 19 117 118})
        (regions {155 156 21 20 22 23 24 25 26})
        (regions {20 22 23 24 25 26 27 28 29})
        (regions {24 25 26 27 28 29 30 119 120})
        (regions {157 158 32 31 33 34 35 36 37})
        (regions {31 33 34 35 36 37 38 39 40})
        (regions {35 36 37 38 39 40 41 121 122})
        (regions {159 160 43 42 44 45 46 47 48})
        (regions {42 44 45 46 47 48 49 50 51})
        (regions {46 47 48 49 50 51 52 123 124})
        (regions {161 162 54 53 55 56 57 58 59})
        (regions {53 55 56 57 58 59 60 61 62})
        (regions {57 58 59 60 61 62 63 125 126})
        (regions {163 164 65 64 66 67 68 69 70})
        (regions {64 66 67 68 69 70 71 72 73})
        (regions {68 69 70 71 72 73 74 127 128})
        (regions {165 166 76 75 77 78 79 80 81})
        (regions {75 77 78 79 80 81 82 83 84})
        (regions {79 80 81 82 83 84 85 129 130})
        (regions {167 168 87 86 88 89 90 91 92})
        (regions {86 88 89 90 91 92 93 94 95})
        (regions {90 91 92 93 94 95 96 131 132})
        (regions {169 170 98 97 99 100 101 102 103})
        (regions {97 99 100 101 102 103 104 105 106})
        (regions {101 102 103 104 105 106 107 133 134})
        (regions {108 109 110 111 112 113 114 115 116})
        (regions {135 136 137 138 139 140 141 142 143})
        (regions {144 145 146 147 148 149 150 151 152})
        
        // Column
        (regions {153 155 157 159 161 163 165 167 169})
        (regions {154 156 158 160 162 164 166 168 170})
        (regions {2 21 32 43 54 65 76 87 98})
        (regions {171 180 0 1 20 31 42 53 64})
        (regions {1 20 31 42 53 64 75 86 97})
        (regions {42 53 64 75 86 97 108 135 144})
        (regions {172 181 3 4 22 33 44 55 66})
        (regions {4 22 33 44 55 66 77 88 99})
        (regions {44 55 66 77 88 99 109 136 145})
        (regions {173 182 5 6 23 34 45 56 67})
        (regions {6 23 34 45 56 67 78 89 100})
        (regions {45 56 67 78 89 100 110 137 146})
        (regions {174 183 7 8 24 35 46 57 68})
        (regions {8 24 35 46 57 68 79 90 101})
        (regions {46 57 68 79 90 101 111 138 147})
        (regions {175 184 9 10 25 36 47 58 69})
        (regions {10 25 36 47 58 69 80 91 102})
        (regions {47 58 69 80 91 102 112 139 148})
        (regions {176 185 11 12 26 37 48 59 70})
        (regions {12 26 37 48 59 70 81 92 103})
        (regions {48 59 70 81 92 103 113 140 149})
        (regions {177 186 13 14 27 38 49 60 71})
        (regions {14 27 38 49 60 71 82 93 104})
        (regions {49 60 71 82 93 104 114 141 150})
        (regions {178 187 15 16 28 39 50 61 72})
        (regions {16 28 39 50 61 72 83 94 105})
        (regions {50 61 72 83 94 105 115 142 151})
        (regions {179 188 17 18 29 40 51 62 73})
        (regions {18 29 40 51 62 73 84 95 106})
        (regions {51 62 73 84 95 106 116 143 152})
        (regions {19 30 41 52 63 74 85 96 107})
        (regions {117 119 121 123 125 127 129 131 133})
        (regions {118 120 122 124 126 128 130 132 134})
        
        // Subgrid
        (regions {171 172 173 180 181 182 0 3 5})
        (regions {174 175 176 183 184 185 7 9 11})
        (regions {177 178 179 186 187 188 13 15 17})
        (regions {153 154 2 156 155 157 158 21 32})
        (regions {1 4 6 20 22 23 31 33 34})
        (regions {8 10 12 24 25 26 35 36 37})
        (regions {14 16 18 27 28 29 38 39 40})
        (regions {19 117 118 30 119 120 41 121 122})
        (regions {159 160 43 161 162 163 164 54 65})
        (regions {42 44 45 53 55 56 64 66 67})
        (regions {46 47 48 57 58 59 68 69 70})
        (regions {49 50 51 60 61 62 71 72 73})
        (regions {52 63 74 123 124 125 126 127 128})
        (regions {165 166 167 168 169 170 76 87 98})
        (regions {75 77 78 86 88 89 97 99 100})
        (regions {79 80 81 90 91 92 101 102 103})
        (regions {82 83 84 93 94 95 104 105 106})
        (regions {85 96 107 129 130 131 132 133 134})
        (regions {108 109 110 135 136 137 144 145 146})
        (regions {111 112 113 138 139 140 147 148 149})
        (regions {114 115 116 141 142 143 150 151 152})
    }) 
    (rules
    	(start <Challenge>)
        (play (satisfy (all Different)))
        (end (if (is Solved) (result P1 Win)))
    )
)

//------------------------------------------------------------------------------

(option "Challenge" <Challenge> args:{ <start> }
{
(item "1" 
    <(set { 
        {171 6} {172 8} {182 5} {7 5} {184 9} {11 1} {186 3} 
        {178 2} {179 5} {155 9} {157 8} {158 1} {32 7}  
        {160 3} {54 8} {164 9} {165 3} {166 5} {76 6} 
        {167 4} {120 1} {41 5} {121 3} {122 6} {123 7} 
        {132 7} {144 2} {145 5} {137 6} {111 9} 
        {139 8} {113 4} {141 4} {151 9} {152 7} {63 4}
        {127 5} {85 8} {129 1} {130 9}
    })>
    ""
) 
})

//------------------------------------------------------------------------------

(metadata 
    (info
        {
        (description "Flower Sudoku is one of the sudoku variation with overlapping sudoku grids.")
        (rules "The puzzle consists of five grids, one in the center and the other 4 extend 1 side of the center grid.")
        (source "<a href=\"https://www.cross-plus-a.com/fr/sudoku.htm#FlowerSudoku\" target=\"_blank\" class=\"style1\" style=\"color: #0000EE\" />cross-plus-a.com</a>")
        (version "1.3.12")
        (classification "puzzle/deduction")
        (credit "Pierre Accou")
        }
    )
    (graphics {
        (show Line {
            {160 102} {187 129} {150 159} {190 199} {169 111} {178 120}
            {190 150} {160 187} {199 159} {102 129} {153 193} {156 196}
            } 
            (colour Black) scale:2
        )
    })
)
